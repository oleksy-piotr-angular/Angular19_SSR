<div>Component app</div>

<router-outlet></router-outlet>
<!--! Alternatively, you can specify a template reference variable in the same template as the @defer block as the element that is watched to enter the viewport. This variable is passed in as a parameter on the viewport trigger. -->

<div class="class-a">
  @defer (on viewport(triggerElement)) {
  <p>on viewport(triggerElement)</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on viewport(triggerElement)
    <br />
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! "on idle" A trigger to start loading the defer content after the browser reports idle state (default). -->
@defer (on idle) {
<p>on idle</p>
<app-large-component />
}@loading(after 100ms; minimum 1s){
<p>Fetching Content</p>
} @placeholder(minimum 500ms) {
<p>on idle <br> please wait at least 500ms when large component has been loaded</p>
} @error {
<p>Failed to load a content. Please try again later</p>
}
<br />
<!--! The viewport trigger loads the deferred content when the specified content enters the viewport using the Intersection Observer API. Observed content may be @placeholder content or an explicit element reference. -->
<div class="class-a">
  @defer (on viewport) {
  <p>on viewport</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on viewport 
    <br> 
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<div class="class-a">
  @defer (on viewport) {
  <p>on viewport</p>
 <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on viewport 
    <br> 
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<div class="class-a">
  @defer (on viewport) {
  <p>on viewport</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on viewport 
    <br> 
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! The interaction trigger loads the deferred content when the user interacts with the specified element through click or keydown events. -->
<div class="">
  @defer (on interaction) {
  <p>on interaction</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on interaction 
    <br>
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! The hover trigger loads the deferred content when the mouse has hovered over the triggered area through the mouseover and focusin events. -->
<div class="">
  @defer (on hover) {
  <p>on hover</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on hover 
    <br>
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! The immediate trigger loads the deferred content immediately. This means that the deferred block loads as soon as all other non-deferred content has finished rendering -->
<div class="">
  @defer (on immediate) {
  <p>on immediate</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on immediate 
    <br>
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! The timer trigger loads the deferred content after a specified duration. -->
<div class="">
  @defer (on timer(2000ms)) {
  <p>on timer(2000ms)</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on timer(2000ms) 
    <br>
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! The when trigger accepts a custom conditional expression and loads the deferred content when the condition becomes truthy. -->
<div class="">
  @defer (when showLargeComponent) {
  <p>when showLargeComponent</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>
    
    [please wait at least 500ms when large component has been loaded] <br>
    when showLargeComponent 
    
    <br>
    change this property in Angular DevTools to show this component

    </p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />
<!--! In addition to specifying a condition that determines when deferred content is shown, you can optionally specify a prefetch trigger. This trigger lets you load the JavaScript associated with the @defer block before the deferred content is shown.-->

<!--! Prefetching enables more advanced behaviors, such as letting you start to prefetch resources before a user has actually seen or interacted with a defer block, but might interact with it soon, making the resources available faster. -->

<!--! You can specify a prefetch trigger similarly to the block's main trigger, but prefixed with the prefetch keyword. The block's main trigger and prefetch trigger are separated with a semi-colon character (;). -->

<!--! In the example below, the prefetching starts when a browser becomes idle and the contents of the block is rendered only once the user interacts with the placeholder. -->

<div class="">
  @defer (on interaction; prefetch on idle) {
  <p>on interaction; prefetch on idle</p>
  <app-large-component />
  }@loading(after 100ms; minimum 1s){
  <p>Fetching Content</p>
  } @placeholder(minimum 500ms) {
  <p>on interaction; prefetch on idle 
    <br>
    please wait at least 500ms when large component has been loaded</p>
  } @error {
  <p>Failed to load a content. Please try again later</p>
  }
</div>
<br />

<div #triggerElement>TRIGGER ELEMENT</div>